<!doctype html>
<html>
<meta name="csrf-token" content="{{ csrf_token() }}">
<meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="apple-mobile-web-app-capable" content="yes">
<meta property="fb:app_id" content="397007164160816" />
<meta property="og:type" content="thetestasdf:recipie" />
<meta property="og:url" content="https://www.maidandhelper.com" />
<meta property="og:title" content="Cookie Recipie!" />
<meta property="og:description" content="Tastiest recipe ever" />
<meta property="og:image" content="https://www.maidandhelper.com/uploads/398/152982589327604902_177527993019842_1858867125_o.jpg" />

<meta property="og:image" content="/images/textbotphot.jpg" />


 <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<link rel="stylesheet" href="/css/bootstrap.min.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
<link rel="icon" href="/images/favicon.png" type="image/png">
<link href="/node_modules/video.js/dist/video-js.min.css" rel="stylesheet">
  <link href="/node_modules/videojs-record/dist/css/videojs.record.css" rel="stylesheet">



<link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.min.css" rel="stylesheet"/>
 
 <link rel="stylesheet" href="/css/bootstrap-select.min.css">

  <link rel="stylesheet" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">



<title>Maid & Helper</title>

<script type="text/javascript" src="/js/jquery.js"></script>

<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="/js/count-number.js"></script>
<script type="text/javascript" src="/js/jquery.canvasjs.min.js"></script>
<script type= "text/javascript" src = "/images/js/countries.js"></script>
<script type="text/javascript" src="/js/script.js"></script>
<script src="/node_modules/video.js/dist/video.min.js"></script>
  <script src="/node_modules/recordrtc/RecordRTC.js"></script>
  <script src="/node_modules/webrtc-adapter/out/adapter.js"></script>
   


  <script src="/node_modules/videojs-record/dist/videojs.record.js"></script>




  <meta name="csrf-token" content="{{ csrf_token() }}">

 
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.jquery.min.js"></script>

<script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>









    <style>
  .select2-selection__rendered{

    background: white;
    border: 1px solid rgba(115, 115, 115, 0.48)!important;
    float: left;
    width: 100%;
    height: 40px;
    border-radius: 5px;
    /* border: 0; */
    box-shadow: none;
    border: 2px solid white;
    margin-top: 10px;
    color: rgba(0,0,0,0.7)!important;;
  }
  .select2-container--default .select2-selection--single .select2-selection__arrow {
    height: 57px!important;}
  .select2-container .select2-selection--single
  {
    height: 0px!important;
  }
  .select2-container--default .select2-selection--single{    background-color: 0!important;border: 0!important}
  .watchvideo img{
    height: 20%!important;
  }


#loader {
    bottom: 0;
    height: 175px;
    left: 0;
    margin: auto;
    position: absolute;
    right: 0;
    top: 0;
    width: 175px;
}
#loader {
    bottom: 0;
    height: 175px;
    left: 0;
    margin: auto;
    position: absolute;
    right: 0;
    top: 0;
    width: 175px;
}
#loader .dot {
    bottom: 0;
    height: 100%;
    left: 0;
    margin: auto;
    position: absolute;
    right: 0;
    top: 0;
    width: 87.5px;
}
#loader .dot::before {
    border-radius: 100%;
    content: "";
    height: 87.5px;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;
    transform: scale(0);
    width: 87.5px;
}
#loader .dot:nth-child(7n+1) {
    transform: rotate(45deg);
}
#loader .dot:nth-child(7n+1)::before {
    animation: 0.8s linear 0.1s normal none infinite running load;
    background: #00ff80 none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+2) {
    transform: rotate(90deg);
}
#loader .dot:nth-child(7n+2)::before {
    animation: 0.8s linear 0.2s normal none infinite running load;
    background: #00ffea none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+3) {
    transform: rotate(135deg);
}
#loader .dot:nth-child(7n+3)::before {
    animation: 0.8s linear 0.3s normal none infinite running load;
    background: #00aaff none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+4) {
    transform: rotate(180deg);
}
#loader .dot:nth-child(7n+4)::before {
    animation: 0.8s linear 0.4s normal none infinite running load;
    background: #0040ff none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+5) {
    transform: rotate(225deg);
}
#loader .dot:nth-child(7n+5)::before {
    animation: 0.8s linear 0.5s normal none infinite running load;
    background: #2a00ff none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+6) {
    transform: rotate(270deg);
}
#loader .dot:nth-child(7n+6)::before {
    animation: 0.8s linear 0.6s normal none infinite running load;
    background: #9500ff none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+7) {
    transform: rotate(315deg);
}
#loader .dot:nth-child(7n+7)::before {
    animation: 0.8s linear 0.7s normal none infinite running load;
    background: magenta none repeat scroll 0 0;
}
#loader .dot:nth-child(7n+8) {
    transform: rotate(360deg);
}
#loader .dot:nth-child(7n+8)::before {
    animation: 0.8s linear 0.8s normal none infinite running load;
    background: #ff0095 none repeat scroll 0 0;
}
#loader .lading {
    background-image: url("../images/loading.gif");
    background-position: 50% 50%;
    background-repeat: no-repeat;
    bottom: -40px;
    height: 20px;
    left: 0;
    position: absolute;
    right: 0;
    width: 180px;
}
@keyframes load {
100% {
    opacity: 0;
    transform: scale(1);
}
}
@keyframes load {
100% {
    opacity: 0;
    transform: scale(1);
}
}
  #step-2{
    display:none;
  }
   #step-3{
    display:none;
  }
.marginclass{
    margin-top:15px;
}


</style>
<title>Maid & Helper</title>


</head>
<body>
    <script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
    <script src="https://cdn.webrtc-experiment.com/gif-recorder.js"></script>
    <script src="https://cdn.webrtc-experiment.com/getScreenId.js"></script>

    <!-- for Edige/FF/Chrome/Opera/etc. getUserMedia support -->
    <script src="https://cdn.webrtc-experiment.com/gumadapter.js"></script>
    
     <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script src="https://cdn.webrtc-experiment.com/DetectRTC.js"> </script>
    
<div class="sliderphoto derpho" style="background:url(/images/slide5.jpg) fixed center center no-repeat; background-size:cover;"> </div>

<!--//siderdiv-->

<div class="container regis-form">
  <div class="bacform">
    <h1 class="titltop">{{$label}}</h1>
  
      <form  action="/registerwithout" method="POST" class="formlogin" enctype="multipart/form-data">
        {{csrf_field()}}
          <div class="divwits merginbot">
          <input type="hidden" name="jobid" id="jobid" value="{{$jobid}}">  
            <!--<label class="desired">Desired job</label>-->
            <select class="form-control requirments" name="job_id" style="width:100%" id="job_id" required=""  >
                   <option selected="" disabled="disabled" >desired job</option>
                    @foreach(\App\Job::all() as $job)
                      <option value="{{$job->id}}">{{$job->name}}</option>
                    @endforeach
            </select>
          </div>
          <div class="divwits merginbot"> 
              <select class="form-control requirments" name="industry_id" style="width:100%" id="industry_id" required="" >
                  <option selected="" disabled="disabled" >desired industry</option>
                    @foreach(\App\Industry::all() as $ind)
                      <option value="{{$ind->id}}" >{{$ind->name}}</option>
                    @endforeach
                </select>
                </div>

          <!--divwits-->
          <div class="divwits merginbot"> 
            
          <select class="form-control requirments" name="nationality_id" id="nation_id" required="" style="width:100%"  onblur="processForm(this.form)">
                  <option selected="" disabled="disabled">Nationality</option>
                  @foreach(\App\Nationality::all() as $nation)
                    <option value="{{$nation->id}}" >{{$nation->name}}</option>
                  @endforeach
                </select>
          </div>
          <!--divwits-->
          
          <div class="divwits merginbot"> 
            <!--<label class="desired">Current location</label>-->
            <select class="form-control requirments" name="country_id" id="country_id"  required="" >
                  <option selected="" disabled="" >desired location</option>
                   @foreach(\App\Country::all() as $country)
                      <option value="{{$country->id}}" >{{$country->name}}</option>
                    @endforeach
                </select>
          </div>
          <!--divwits-->
          
         
          <div class="divwits merginbot"> 
            <!--<label class="desired">Full name</label>-->
            <input type="text" class="form-control requirments" name="name" placeholder=" Full name">
          </div>
          <!--divwits-->
          
          <div class="divwits merginbot"> 
            <!--<label class="desired">Email</label>-->
            <input type="email" class="form-control requirments" name="email" placeholder=" Email">
          </div>
          <!--divwits-->
          
          <div class="divwits merginbot"> 
            <!--<label class="desired">Phone no</label>-->
            <input type="number" class="form-control requirments" name="phone" placeholder=" Phone no">
          </div>
          <div class="divwits merginbot"> 
            <!--<label class="desired">Phone no</label>-->
            <input type="password" class="form-control requirments" name="password" placeholder="password">
          </div>
          <!--divwits-->
          
          <div class="divwits merginbot" >
            <div class="input-group input-file" name="cv_path">
                <input type="text" style="background: #ccc;color:rgba(0,0,0,0.7)!important" class="form-control requirments"  placeholder='cv...' onblur="processForm(this.form)" /> 
                <span class="input-group-btn">
                <button class="btn btn-default btn-choose largeredbtn brows" type="button" onblur="processForm(this.form)">upload</button>
                </span> </div>
            </div>

            <div class="divwits merginbot" >
                <div class="input-group input-file" name="logo">
                <input type="text" style="background: #ccc;color:rgba(0,0,0,0.7)!important" class="form-control requirments"  placeholder='image...'  />
                <span class="input-group-btn">
                <button class="btn btn-default btn-choose largeredbtn brows" type="button" onblur="processForm(this.form)">brows</button>
                </span> </div>
            </di>
          <!--divwits-->
          
          <!-- <div class="divwits merginbot">
            <div class="row">
              <div class="col-sm-6 record-ve">
                <a data-toggle="modal" data-target="#record_video" class="largeredbtn"> <i class="fas fa-video"></i> record a video</a>
              </div>
              <div class="col-sm-6 record-ve">
              <input type="file" id="video_file" style="display: none;" name="video_file" > 
               <a href="#"  class="largeredbtn  file_input"  style="margin-right: 20px;">
               <i class="fas fa-cloud-upload-alt"></i>
                 upload a video
                </a> -->
                <!-- <button type="submit" class="largeredbtn"> <i class="fas fa-upload"></i> upload Video</button> -->
              <!-- </div>
            </div> -->
            <!--row--> 
            
          <!-- </div> -->
          <!--divwits-->
          

 <div class="divwits merginbot" style="margin-left: 20%;margin-top:20px">
               <input type="file" id="video_file" style="display: none;" name="video_file" > 
               <a href="#"  class="largeredbtn  file_input"  style="margin-right: 20px;">
                <i class="fas fa-cloud-upload-alt"></i>
                 upload a video
                </a>
               <a href="#" data-toggle="modal" data-target="#record_video" class="largeredbtn" > <i class="fas fa-video" ></i> record a video</a>
            </div>



          <div class="divwits textbot">
            <button type="submit" class="largeredbtn"> send</button>
          </div>
          <!--divwits-->
           
        </form>
    
    <!--input-search-->
    
    <div class="ie-clear"></div>
  </div>
  <!--bacform--> 
  {!! JsValidator::formRequest('App\Http\Requests\CanRegisterFormRequestwithout', '.formlogin'); !!}
</div>
<!--container-->




<div id="myModa3" class="modal fade">
  <div class="modal-content dal-conte dal-conte2"> <i class="fas fa-check-circle"></i>
  <h2 class="textcandidate">congratulations</h2>
      <p class="viewsdriver">we found a match jobs  </p> 15
    
   <div class="sk-circle">
        <div class="sk-circle1 sk-child"></div>
        <div class="sk-circle2 sk-child"></div>
        <div class="sk-circle3 sk-child"></div>
        <div class="sk-circle4 sk-child"></div>
        <div class="sk-circle5 sk-child"></div>
        <div class="sk-circle6 sk-child"></div>
        <div class="sk-circle7 sk-child"></div>
        <div class="sk-circle8 sk-child"></div>
        <div class="sk-circle9 sk-child"></div>
        <div class="sk-circle10 sk-child"></div>
        <div class="sk-circle11 sk-child"></div>
        <div class="sk-circle12 sk-child"></div>
      </div>
       <div class="linksing"> rediricling you to the profile page in <span class="nambers">7</span> seconds</div>
   
  </div>
</div>
<div id="myModa2" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> record a video
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="textbox">
        <form action="#" method="" class="formlogin video-rc">

          <video id="myVideo" class="video-js vjs-default-skin"></video>
          <div class="divwits iconfont">
            <label style="color: red" id="Sucessrecord"></label>
           
          </div>
        
        </form>
      </div>
      <!--textbox--> 
      
    </div>
  </div>
</div>




<div id="record_video" class="modal fade record_video stream" role="dialog">
        <div class="modal-dialog ">

            <!-- Modal content-->
          <div class="modal-content inpudata">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Record your Video</h4>
                </div>
                <div class="modal-body inpudata">
                    <div id="container">

                        <div class="col-sm-12" hidden>
                            <div class="col-sm-2"></div>
                            <div class="col-sm-3">
                                <label class="pull-right">:<span style="color: red;">*</span> </label>
                            </div>
                            <div class="col-sm-4 inpudata"  >
                                <input type="text" name="video_title" id="video_title" class="form-control">
                            </div>
                        </div>
                        <div class="in-iframe">
                            <video id="gum" autoplay muted style="width: 100%;
    margin:0px 0px 0px 0px;background-color:black"></video>
                            <video id="recorded" hidden style="width: 100%;
    margin: 10px 10px 10px;"></video>
                        </div>
<div class="divwits">
            <div class="row" style="Background-color:#009df4">
            <div class="col-sm-3 record-ve" style="margin-bottom:-30px">
                            <button class=" largeredbtn"   id="record" ><i class="fas fa-video"></i>record</button>
                            </div>
                            <div class="col-sm-3 record-ve">
                            <button class=" largeredbtn"  id="play" disabled> <i class="fas fa-play"></i>play</button>
                            </div>
                            <div class="col-sm-3 record-ve">
                            <button class=" largeredbtn"  id="uploadv" disabled> <i class="fas fa-upload"></i>save</button>
                            </div>
                            <div class="col-sm-3 record-ve">
                            <button class=" largeredbtn"  id="download" disabled><i class="fas fa-download"></i>Download</button>
                       
                            </div>
</div>
</div>
                        <div class="row" id="progress_v" hidden>
                            <div id="loader">
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="dot"></div>
                            <div class="lading"> uploading wait please ...</div>

                        </div>
                     </div>
                  </div>

     
                <div class="modal-footer">
                    <!-- <button type="button" class="btn btn-default close_vedio" data-dismiss="modal"></button> -->
                </div>
  </div>
  </div>
</div>
<div id="myModalcongratulation" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> 
       
      </div>
      <div class="textbox">
      
     Congratulation,your video uploaded sucessfuly please enter finsh to submit your profile
    </div>
  </div>
      </div>
      <!--textbox--> 
      
    </div>
  </div>
</div>

<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
<script type="text/javascript" src="/vendor/jsvalidation/js/jsvalidation.js"></script>
<script src="/dist/jquery.validate.js"></script>
<script>

  $('.file_input').on('click',function(){
    $('#video_file').click();
  });
</script>
<script >
 'use strict';
    $(document).ready(function(){
      $('#job_id').select2();
    $('#industry_id').select2();
    $('#country_id').select2();
    $('#nation_id').select2();
$('#city_id').select2();




$.ajaxSetup({
 headers: {
     'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
 }

});




var assetURL = 'frag_bunny.mp4';
// Need to be specific for Blink regarding codecs
// ./mp4info frag_bunny.mp4 | grep Codec
var mimeCodec = 'video/mp4; codecs="avc1.42E01E, mp4a.40.2"';

if ('MediaSource' in window && MediaSource.isTypeSupported(mimeCodec)) {
  var mediaSource = new MediaSource;
  //console.log(mediaSource.readyState); // closed
 // video.src = URL.createObjectURL(mediaSource);
// var mediaSource = new MediaSource();
window.MediaSource = window.MediaSource || window.WebKitMediaSource;
var mediaSource = new MediaSource();
  mediaSource.addEventListener('sourceopen', handleSourceOpen, false);
} else {
  console.error('Unsupported MIME type or codec: ', mimeCodec);
}



        var mediaRecorder;
        var recordedBlobs;
        var sourceBuffer;

        var gumVideo = document.querySelector('video#gum');
        var recordedVideo = document.querySelector('video#recorded');


        var recordButton = document.querySelector('button#record');
        var playButton = document.querySelector('button#play');
        var downloadButton = document.querySelector('button#download');
        recordButton.onclick = toggleRecording;
        playButton.onclick = play;
        downloadButton.onclick = download;

        // window.isSecureContext could be used for Chrome
        var isSecureOrigin = location.protocol === 'https:' ||
                location.hostname === 'localhost';
        if (!isSecureOrigin) {

            var alert_content='';
            alert_content+='getUserMedia() must be run from a secure origin: HTTPS or localhost.' +
                    '\n\nChanging protocol to HTTPS';

            $('#alert_box').append(alert_content);
            $('#record_video').modal('hide');

            location.protocol = 'HTTPS';
        }

        var constraints = {
            audio: true,
            video: true
        };

        var uploadfiles = document.querySelector('button#uploadv');
        uploadfiles.onclick = uploadFile;
        //uploadfiles.addEventListener('change', function () {

        //v/ar files = this.files;

        // for(var i=0; i<files.length; i++){

        //    uploadFile(this.files[i]); // call the function to upload the file

        //  }

        //}, false);


        function uploadFile(){
            $('#progress_v').show();
            var blob = new Blob(recordedBlobs, {type: 'video/webm'});
            var fileType = blob.type.split('/')[0] || 'audio';
            var fileName = (Math.random() * 1000).toString().replace('.', '');
            if (fileType === 'audio') {
                fileName += '.' + (!!navigator.mozGetUserMedia ? 'ogg' : 'wav');
            } else {
                fileName += '.webm';
            }
            

            var url = window.URL.createObjectURL(blob);
    
            var a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.upload = 'test.webm';
            document.body.appendChild(a);
            // a.click();

            var surl = '/StoreVideo';

            var xhr = new XMLHttpRequest();

            var fd = new FormData();

            xhr.open("POST", surl, true);

            xhr.onreadystatechange = function() {

                if (xhr.readyState == 4 && xhr.status == 200) {
                  $('#myModalcongratulation').modal('show');
                  
                  //  var alert_content='';
                  //   alert_content+=' <div class="alert alert-success alert-dismissable fade in " id="profile_alert">';
                  //   alert_content+=' <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>';
                  //   alert_content+='<strong>{{trans('ocs/registration::massages/message.success.video_uploaded')}}</strong>';
                  //   alert_content+=' </div>';
                  
                    $('#record_video').modal('hide');
                    $('#video_data').val("{{asset('/candidates/videos/')}}"+'/'+fileName);
                    return;
                    // Every thing ok, file uploaded
                    console.log(xhr.responseText); // handle response.


                }
                else

                {

                }

            };

            fd.append(fileType + '-filename', fileName);
            fd.append(fileType + '-blob', blob);
            fd.append('video_title',$('#video_title').val());
            fd.append('_token','{{csrf_token()}}');
            xhr.send(fd);


        }

        function handleSuccess(stream) {

            recordButton.disabled = false;
            console.log('getUserMedia() got stream: ', stream);
            window.stream = stream;
            if (window.URL) {
                gumVideo.src = window.URL.createObjectURL(stream);
            }
            else {
                gumVideo.src = stream;
            }
        }

        function handleError(error) {

            console.log('navigator.getUserMedia error: ', error);
        }
        $('.record_video').on('click',function(){

            navigator.mediaDevices.getUserMedia(constraints).
                    then(handleSuccess).catch(handleError);

        });

        $('.stream').on('hidden.bs.modal', function () {

            $('#gum').hide();
            $('#recorded').hide();
            recordButton.textContent = 'record';
            if (mediaStream.getVideoTracks().length && mediaStream.getVideoTracks()[0].stop) {
    mediaStream.getVideoTracks().forEach(function(track) {
        track.stop();
    });
}


           // stream.getVideoTracks()[0].stop();
        });





        function handleSourceOpen(event) {
            console.log('MediaSource opened');
            sourceBuffer = mediaSource.addSourceBuffer('video/webm; codecs="vp8"');
            console.log('Source buffer: ', sourceBuffer);
        }

        recordedVideo.addEventListener('error', function(ev) {
            console.error('MediaRecording.recordedMedia.error()');

            var alert_content='';
            alert_content+='Your browser can not play\n\n' + recordedVideo.src
                    + '\n\n media clip. event: ' + JSON.stringify(ev);

            $('#alert_box').append(alert_content);
            $('#record_video').modal('hide');

        }, true);

        function handleDataAvailable(event) {

            if (event.data && event.data.size > 0) {
                recordedBlobs.push(event.data);
            }
        }

        function handleStop(event) {

            console.log('Recorder stopped: ', event);
        }

        function toggleRecording() {
         

            if (recordButton.textContent === 'record') {
                startRecording();
            }
            else
            {
                stopRecording();
                recordButton.textContent = 'record';
                playButton.disabled = false;
                downloadButton.disabled = false;
                uploadfiles.disabled = false;


            }
        }

        function startRecording() {

navigator.permissions.query({name:'camera'}).then(function(result) {
  if (result.state == 'granted') {

  } else if (result.state == 'prompt') {

  } else if (result.state == 'denied') {

  }
  result.onchange = function() {

  };
});
var recorder = new window.MediaRecorder(stream);

            $('#gum').show();
            recordedBlobs = [];
            var options = {mimeType: 'video/webm;'};
            if (!MediaRecorder.isTypeSupported(options.mimeType)) {

                console.log(options.mimeType + ' is not Supported');
                options = {mimeType: 'video/webm;codecs=vp8'};
                if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                    console.log(options.mimeType + ' is not Supported');
                    options = {mimeType: 'video/webm'};
                    if (!MediaRecorder.isTypeSupported(options.mimeType)) {
                        console.log(options.mimeType + ' is not Supported');
                        options = {mimeType: ''};
                    }
                }
            }

            try
            {
              console.log("StartRecord");
            alert("StartRecord");
              mediaRecorder = new MediaRecorder(window.stream, options);

            }

            catch (e)
            {
                  alert(e);
              console.log("StartRecord Wrong");
                console.error('Exception while creating MediaRecorder: ' + e);
                var alert_content='';
                alert_content+='Exception while creating MediaRecorder: '
                        + e + '. mimeType: ' + options.mimeType;
                $('#alert_box').append(alert_content);
                $('#record_video').modal('hide');

                return;
            }
            console.log('Created MediaRecorder', mediaRecorder, 'with options', options);
            recordButton.textContent = 'Stop record';
            playButton.disabled = true;
            downloadButton.disabled = true;
            uploadfiles.disabled = true;

            mediaRecorder.onstop = handleStop;
            mediaRecorder.ondataavailable = handleDataAvailable;
            mediaRecorder.start(10); // collect 10ms of data
            console.log('MediaRecorder started', mediaRecorder);
        }

        function stopRecording() {
            // $('#gum').hide();
            mediaRecorder.stop();
            console.log('Recorded Blobs: ', recordedBlobs);
            recordedVideo.controls = true;
        }

        function play() {
          $('#gum').hide();
            $('#recorded').show();
            var superBuffer = new Blob(recordedBlobs, {type: 'video/webm'});
            recordedVideo.src = window.URL.createObjectURL(superBuffer);
        }

        function download() {

            var blob = new Blob(recordedBlobs, {type: 'video/webm'});
            var url = window.URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = 'test.webm';
            document.body.appendChild(a);
            a.click();
            setTimeout(function() {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 100);
        }
















    });
</script>


</html>
